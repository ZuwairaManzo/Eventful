import apiClient from '../utils/apiClient';

const getEvents = async () => {
  const response = await apiClient.get('/events');
  return response.data;
};

const getEventById = async (id) => {
  const response = await apiClient.get(`/events/${id}`);
  return response.data;
};

const getRegisteredEvents = async () => {
  const token = localStorage.getItem('token');
  apiClient.defaults.headers.common['Authorization'] = `Bearer ${token}`;
  const response = await apiClient.get('/events/registered');
  return response.data;
};

const registerForEvent = async (eventId) => {
  const token = localStorage.getItem('token');
  apiClient.defaults.headers.common['Authorization'] = `Bearer ${token}`;
  const response = await apiClient.post(`/events/${eventId}/register`);
  return response.data;
};

export default {
  getEvents,
  getEventById,
  getRegisteredEvents,
  registerForEvent,
};